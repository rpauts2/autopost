# üì∏ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Writer —Ä–µ—à–∞–µ—Ç –Ω—É–∂–Ω—ã –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –í—ã–∑—ã–≤–∞–µ—Ç `image_generator.should_generate_image()` –¥–ª—è –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –≤ `context.shared_data["needs_image"]` –∏ `["image_description"]`

### 2. Editor —É—Ç–æ—á–Ω—è–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (VK, Telegram, Dzen) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω—É–∂–Ω—ã –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `context.shared_data["editor_image_descriptions"]`:
  ```python
  {
    "vk": {"needs_image": True, "description": "..."},
    "telegram": {"needs_image": True, "description": "..."},
    "dzen": {"needs_image": True, "description": "..."}
  }
  ```

### 3. Publisher –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç
- –î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `editor_image_descriptions[platform]`
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –≤—ã–∑—ã–≤–∞–µ—Ç `image_generator.generate_image(description, style)`
- –ü–æ–ª—É—á–∞–µ—Ç `bytes` –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–µ—Ç –≤ `metadata["image"]` –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### 4. –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**VK:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `upload_image_to_vk()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ API
- –ü–æ–ª—É—á–∞–µ—Ç `photo{owner_id}_{photo_id}`
- –î–æ–±–∞–≤–ª—è–µ—Ç –≤ attachments

**Telegram:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `send_photo()` —Å BytesIO
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ —Å —Ç–µ–∫—Å—Ç–æ–º –∫–∞–∫ caption

**Dzen:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä Playwright
- –í—Å—Ç–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–∞—Ç—å—é

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `image_generator.enabled = True`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
   - "Image decision: needs=True..."
   - "Image needed for {platform}..."
   - "Generating image for {platform}..."
   - "‚úÖ Image generated successfully..."
   - "‚úÖ Image sent with first message to Telegram"
   - "Image uploaded to VK: photo..."
   - "Image uploaded: {path}" (–¥–ª—è Dzen)

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Pillow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `pip install Pillow`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `should_generate_image()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `generate_image()` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`

–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—Å—Ç—å –≤ `metadata["image"]`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
3. –î–ª—è VK - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ
4. –î–ª—è Telegram - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ
5. –î–ª—è Dzen - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –≤–∏–¥–∏—Ç —Ñ–∞–π–ª

