# Исправления в версии 1.0.1

## Исправлено

### 1. Dzen Browser (Playwright)
- ✅ Исправлена ошибка `user_data_dir` - теперь используется `launch_persistent_context` вместо `new_context`
- ✅ Правильное закрытие persistent context
- ✅ Сессии теперь сохраняются корректно

### 2. UI - Обновление статуса
- ✅ Исправлено обновление статуса платформ в UI
- ✅ Использование потоков для асинхронных операций
- ✅ Thread-safe обновление UI через QTimer
- ✅ Задержка инициализации статуса для корректной загрузки entity

### 3. Event Loop в UI
- ✅ Исправлено использование event loop в dashboard (start/stop entity)
- ✅ Использование потоков для асинхронных операций
- ✅ Предотвращение ошибок "Event loop is closed"

### 4. Генерация изображений
- ✅ Добавлен модуль `ai/image_generator.py`
- ✅ Интеграция в Writer агент (решение о необходимости изображения)
- ✅ Передача информации об изображениях через pipeline
- ✅ Поддержка в Publisher агенте

### 5. UI - Дублирование
- ✅ Убрано дублирование полей в UI
- ✅ Убрано дублирование меток Dzen

## Добавлено

### Генерация изображений
- Модуль `ImageGenerator` с логикой определения необходимости изображений
- AI-решение о нужности изображения для контента
- Передача метаданных об изображениях через агентов
- Готовая структура для интеграции с внешними API (Stable Diffusion, DALL-E)

## Технические детали

### Dzen Browser
Использование `launch_persistent_context` вместо `launch` + `new_context`:
- Сохраняет сессию автоматически
- Правильная работа с cookies
- Нет конфликтов с user_data_dir

### UI Threading
- Асинхронные операции выполняются в отдельных потоках
- Обновление UI через QTimer.singleShot для thread-safety
- Предотвращение блокировки UI

### Image Generation
Структура готова, но требует внешний API:
- Gemini не поддерживает генерацию изображений
- Нужна интеграция с Stable Diffusion API или DALL-E
- Логика принятия решения о необходимости изображения уже работает

